{"version":3,"file":"static/js/527.bf753b6d.chunk.js","mappings":"+OAwJA,QAlJA,WACE,MAAOA,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,IAAYH,EAAAA,EAAAA,UAASI,GAgG5B,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wCACfD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBC,UAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uCAAsCC,UACnDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,UACxBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,MAAKC,UAClBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACvDF,EAAAA,EAAAA,KAAA,OAAKI,IAAKN,EAAUO,IAAI,OAAOJ,UAAU,oBACvCE,EAAAA,EAAAA,MAAA,QAAMG,SAlFDC,UAGnB,GAFAC,EAAEC,iBAEGhB,GAAaG,EASlB,IACE,MAAMc,QAAiBC,MAAM,uCAAwC,CACnEC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEvB,WAAUG,eAG7BqB,QAAaP,EAASQ,OAE5B,GAAwB,MAApBR,EAASS,OAAgB,CAC3B,MAAMC,OA9CWb,WACrB,IACE,MAAMG,QAAiBC,MAAM,yCAA0C,CACrEC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEK,YAGzB,GAAwB,MAApBX,EAASS,OAEX,aADmBT,EAASQ,QAChBI,gBAEZ,MAAM,IAAIC,MAAM,gCAEpB,CAAE,MAAOC,GAEP,OADAC,QAAQD,MAAM,iCAAkCA,GACzC,IACT,GA2B8BE,CAAeT,EAAKU,WAAWC,YAEzD,IAAKR,EAMH,YALAS,IAAAA,KAAU,CACRC,KAAM,QACNC,MAAO,8BACPC,KAAM,4CAKU,IAAhBf,EAAKgB,QAAgC,IAAhBhB,EAAKgB,QAAgC,IAAhBhB,EAAKgB,OACjDC,OAAOC,SAASC,KAAO,iBAAiBhB,IAExCS,IAAAA,KAAU,CACRC,KAAM,QACNC,MAAO,kBACPC,KAAM,qCAGZ,MAA+B,MAApBtB,EAASS,OAClBU,IAAAA,KAAU,CACRC,KAAM,QACNC,MAAO,kBACPC,KAAM,yCAEqB,MAApBtB,EAASS,OAClBU,IAAAA,KAAU,CACRC,KAAM,UACNC,MAAO,yBACPC,KAAM,yCAGRH,IAAAA,KAAU,CACRC,KAAM,QACNC,MAAO,mBACPC,KAAM,uCAGZ,CAAE,MAAOR,GACPK,IAAAA,KAAU,CACRC,KAAM,QACNC,MAAO,eACPC,KAAM,wEAEV,MAjEEH,IAAAA,KAAU,CACRC,KAAM,UACNC,MAAO,gBACPC,KAAM,wCA8DV,EAa2C9B,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,UAC9BF,EAAAA,EAAAA,KAAA,SACEqC,KAAK,OACLC,YAAY,UACZrC,UAAU,oDACVoB,MAAO5B,EACP8C,SAAW/B,GAAMd,EAAYc,EAAEgC,OAAOnB,YAG1CrB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,UAC9BF,EAAAA,EAAAA,KAAA,SACEqC,KAAK,WACLC,YAAY,gBACZrC,UAAU,iEACVoB,MAAOzB,EACP2C,SAAW/B,GAAMX,EAAYW,EAAEgC,OAAOnB,YAO1CrB,EAAAA,EAAAA,KAAA,UAAQqC,KAAK,SAASpC,UAAU,iFAAgFC,SAAC,+BAYrI,C","sources":["components/login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Swal from 'sweetalert2';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './login.css';\r\nimport logo from './LOGO-FULL-min.png';\r\n\r\nfunction App() {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [logoPath] = useState(logo);\r\n\r\n  const encryptWithAPI = async (value) => {\r\n    try {\r\n      const response = await fetch('http://192.52.242.238:8000/api/encrypt', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ value }),\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        const data = await response.json();\r\n        return data.encrypted_value;\r\n      } else {\r\n        throw new Error('Error al encriptar con la API');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al encriptar con la API:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!username || !password) {\r\n      Swal.fire({\r\n        icon: 'warning',\r\n        title: 'Faltan campos',\r\n        text: 'Por favor completa todos los campos.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://192.52.242.238:8000/api/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.status === 200) {\r\n        const encryptedId = await encryptWithAPI(data.ID_USUARIO.toString());\r\n\r\n        if (!encryptedId) {\r\n          Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error en la encriptación',\r\n            text: 'No se pudo encriptar el ID del usuario.',\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (data.ID_ROL === 1 || data.ID_ROL === 2 || data.ID_ROL === 3) {\r\n          window.location.href = `./campanas?id=${encryptedId}`;\r\n        } else {\r\n          Swal.fire({\r\n            icon: 'error',\r\n            title: 'Rol desconocido',\r\n            text: 'No tienes acceso a ninguna vista.',\r\n          });\r\n        }\r\n      } else if (response.status === 401) {\r\n        Swal.fire({\r\n          icon: 'error',\r\n          title: 'Acceso denegado',\r\n          text: 'Usuario o contraseña incorrectos.',\r\n        });\r\n      } else if (response.status === 422) {\r\n        Swal.fire({\r\n          icon: 'warning',\r\n          title: 'Error en el formulario',\r\n          text: 'Por favor revisa los datos enviados.',\r\n        });\r\n      } else {\r\n        Swal.fire({\r\n          icon: 'error',\r\n          title: 'Error inesperado',\r\n          text: 'Ocurrió un error en el servidor.',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Error de red',\r\n        text: 'No se pudo conectar al servidor. Verifica tu conexión a Internet.',\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row no-gutters\">\r\n        <div className=\"col-md-6 d-none d-md-flex bg-image\"></div>\r\n        <div className=\"col-md-6 bg-light\">\r\n          <div className=\"login d-flex align-items-center py-5\">\r\n            <div className=\"container\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-10 col-xl-7 mx-auto text-center\">\r\n                <img src={logoPath} alt=\"Logo\" className=\"logo img-fluid\" />\r\n                  <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group mb-3\">\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"Usuario\"\r\n                        className=\"form-control rounded-pill border-0 shadow-sm px-4\"\r\n                        value={username}\r\n                        onChange={(e) => setUsername(e.target.value)}\r\n                      />\r\n                    </div>\r\n                    <div className=\"form-group mb-3\">\r\n                      <input\r\n                        type=\"password\"\r\n                        placeholder=\"Contraseña\"\r\n                        className=\"form-control rounded-pill border-0 shadow-sm px-4 text-primary\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                      />\r\n                    </div>\r\n                    {/*<div className=\"form-check mb-3\">\r\n                      <input type=\"checkbox\" className=\"form-check-input\" defaultChecked />\r\n                      <label className=\"form-check-label\">Recordarme</label>\r\n                    </div>*/}\r\n                    <button type=\"submit\" className=\"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm btn-login\">\r\n                      Ingresar\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n"],"names":["username","setUsername","useState","password","setPassword","logoPath","logo","_jsx","className","children","_jsxs","src","alt","onSubmit","async","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","status","encryptedId","value","encrypted_value","Error","error","console","encryptWithAPI","ID_USUARIO","toString","Swal","icon","title","text","ID_ROL","window","location","href","type","placeholder","onChange","target"],"sourceRoot":""}